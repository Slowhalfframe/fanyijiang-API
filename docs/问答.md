## 问答

### 提问

**请求API**

+ `/api/questions/`

**请求方式**

+ POST

**请求头参数**

| 参数名        | 必选 | 类型   | 说明                  |
| :------------ | :--- | :----- | :-------------------- |
| authorization | 是   | string | token值，用于用户校验 |

**参数**

| 参数名  | 必选 | 类型   | 说明                   |
| :------ | :--- | :----- | ---------------------- |
| title   | 是   | string | 问题的标题             |
| content | 否   | string | 问题的正文             |
| labels  | 是   | string | 问题的标签，可以是多个 |

**返回示例**

```json
{
    "code": 0,
    "data": {
        "title": "可逆矩阵",
        "content": "定义是什么？怎么判断？怎么求？",
        "nickname": "小学生",
        "labels": [
            "代数",
            "线性代数"
        ],
        "id": 1
    }
}
```

### 回答问题

**请求API**

+ `/api/questions/(?P<question_id>\d+)/answers/`

**请求方式**

+ POST

**请求头参数**

| 参数名        | 必选 | 类型   | 说明                  |
| :------------ | :--- | :----- | :-------------------- |
| authorization | 是   | string | token值，用于用户校验 |

**参数**

| 参数名  | 必选 | 类型   | 说明       |
| :------ | :--- | :----- | ---------- |
| content | 是   | string | 回答的正文 |

**返回示例**

```json
{
    "code": 0,
    "data": {
        "question": 1,
        "content": "和某个矩阵相乘等于单位矩阵的方阵",
        "user_id": "cd2ed05828ebb648a225c35a9501b007",
        "id": 1,
        "nickname": "大师"
    }
}
```

### 修改回答

**请求API**

+ `/api/questions/(?P<question_id>\d+)/answers/`

**请求方式**

+ PUT

**请求头参数**

| 参数名        | 必选 | 类型   | 说明                  |
| :------------ | :--- | :----- | :-------------------- |
| authorization | 是   | string | token值，用于用户校验 |

**参数**

| 参数名  | 必选 | 类型   | 说明       |
| :------ | :--- | :----- | ---------- |
| content | 是   | string | 回答的正文 |

**返回示例**

```json
{
    "code": 0,
    "data": {
        "question": 1,
        "content": "行列式有倒数的方阵",
        "user_id": "cd2ed05828ebb648a225c35a9501b007",
        "id": 1,
        "nickname": "大师"
    }
}
```

### 删除回答

**请求API**

+ `/api/questions/(?P<question_id>\d+)/answers/`

**请求方式**

+ DELETE

**请求头参数**

| 参数名        | 必选 | 类型   | 说明                  |
| :------------ | :--- | :----- | :-------------------- |
| authorization | 是   | string | token值，用于用户校验 |

**返回示例**

```json
{
    "code": 0,
    "data": null
}
```

### 关注问题

**请求API**

+ `/api/questions/follows/`

**请求方式**

+ POST

**请求头参数**

| 参数名        | 必选 | 类型   | 说明                  |
| :------------ | :--- | :----- | :-------------------- |
| authorization | 是   | string | token值，用于用户校验 |

**参数**

| 参数名   | 必选 | 类型    | 说明   |
| :------- | :--- | :------ | ------ |
| id       | 是   | integer | 问题ID |

**返回示例**

```json
{
    "code": 0,
    "data": null
}
```

### 取消关注问题

**请求API**

+ `/api/questions/follows/?id=<id>`

**请求方式**

+ DELETE

**请求头参数**

| 参数名        | 必选 | 类型   | 说明                  |
| :------------ | :--- | :----- | :-------------------- |
| authorization | 是   | string | token值，用于用户校验 |

**查询字符串参数**

| 参数名   | 必选 | 类型    | 说明   |
| :------- | :--- | :------ | ------ |
| id       | 是   | integer | 问题ID |

**返回示例**

```json
{
    "code": 0,
    "data": null
}
```

### 查看本人关注的问题

**请求API**

+ `/api/questions/follows/`

**请求方式**

+ GET

**请求头参数**

| 参数名        | 必选 | 类型   | 说明                  |
| :------------ | :--- | :----- | :-------------------- |
| authorization | 是   | string | token值，用于用户校验 |

**返回示例**

```json
{
    "code": 0,
    "data": [
        {
            "title": "方阵可逆的条件是什么？",
            "content": "要求是充分必要条件",
            "id": 1
        },
        {
            "title": "方阵相似于对角阵的充分必要条件是什么？",
            "content": "",
            "id": 2
        }
    ]
}
```

### 邀请回答

**请求API**

+ `/api/questions/invitations/`

**请求方式**

+ POST

**请求头参数**

| 参数名        | 必选 | 类型   | 说明                  |
| :------------ | :--- | :----- | :-------------------- |
| authorization | 是   | string | token值，用于用户校验 |

**参数**

| 参数名   | 必选 | 类型    | 说明           |
| :------- | :--- | :------ | -------------- |
| id       | 是   | integer | 问题ID         |
| invited  | 是   | string  | 被邀请用户的ID |

**返回示例**

```json
{
    "code": 0,
    "data": {
        "question": 1,
        "create_at": "19760728 03:42:54",
        "inviting": "cd2ed05828ebb648a225c35a9501b007",
        "invited": "gauss",
        "status": 0,
        "id": 1
    }
}
```

### 撤销未回答的邀请

**请求API**

+ `/api/questions/invitations/?id=<id>&invited_slug=<invited_slug>`

**请求方式**

+ DELETE

**请求头参数**

| 参数名        | 必选 | 类型   | 说明                  |
| :------------ | :--- | :----- | :-------------------- |
| authorization | 是   | string | token值，用于用户校验 |

**查询字符串参数**

| 参数名   | 必选 | 类型    | 说明           |
| :------- | :--- | :------ | -------------- |
| id       | 是   | integer | 问题ID         |
| invited_slug  | 是   | string  | 被邀请用户的slug |

**返回示例**

```json
{
    "code": 0,
    "data": null
}
```

### 拒绝未回答的邀请

**请求API**

+ `/api/questions/invitations/`

**请求方式**

+ PUT

**请求头参数**

| 参数名        | 必选 | 类型   | 说明                  |
| :------------ | :--- | :----- | :-------------------- |
| authorization | 是   | string | token值，用于用户校验 |

**参数**

| 参数名     | 必选 | 类型    | 说明     |
| :--------- | :--- | :------ | -------- |
| id         | 是   | integer | 邀请的ID |

**返回示例**

```json
{
    "code": 0,
    "data": null
}
```

### 查询邀请

**请求API**

+ `/api/questions/invitations/`

**请求方式**

+ GET

**请求头参数**

| 参数名        | 必选 | 类型   | 说明                  |
| :------------ | :--- | :----- | :-------------------- |
| authorization | 是   | string | token值，用于用户校验 |

**返回示例**

```json
{
    "code": 0,
    "data": [
        {
            "question": 32,
            "create_at": "20200219 20:52:18",
            "inviting": "pupil",
            "invited": "cd2ed05828ebb648a225c35a9501b007",
            "status": 1,
            "id": 11
        },
        {
            "question": 33,
            "create_at": "20200219 21:00:53",
            "inviting": "cd2ed05828ebb648a225c35a9501b007",
            "invited": "gauss",
            "status": 0,
            "id": 12
        }
    ]
}
```

### 发表问答评论

**请求API**

+ `/api/questions/comments/`

**请求方式**

+ POST

**请求头参数**

| 参数名        | 必选 | 类型   | 说明                  |
| :------------ | :--- | :----- | :-------------------- |
| authorization | 是   | string | token值，用于用户校验 |

**参数**

| 参数名  | 必选 | 类型    | 说明                                                 |
| :------ | :--- | :------ | ---------------------------------------------------- |
| type    | 否   | string  | 评论的对象类型，question表示问题，省略或其他表示回答 |
| id      | 是   | integer | 评论的对象ID                                         |
| content | 是   | string  | 评论内容                                             |

**返回示例**

```json
{
    "code": 0,
    "data": {
        "user_id": "cd2ed05828ebb648a225c35a9501b007",
        "nickname": "gauss",
        "content": "这个问题很好",
        "create_at": "20200220 13:12:45",
        "reply_to_user": "cd2ed05828ebb648a225c35a9501b007",
        "qa_id": 1,
        "id": 1
    }
}
```

### 撤销本人发表的问答评论

**请求API**

+ `/api/questions/comments/?id=<id>`

**请求方式**

+ DELETE

**请求头参数**

| 参数名        | 必选 | 类型   | 说明                  |
| :------------ | :--- | :----- | :-------------------- |
| authorization | 是   | string | token值，用于用户校验 |

**查询字符串参数**

| 参数名 | 必选 | 类型    | 说明     |
| :----- | :--- | :------ | -------- |
| id     | 是   | integer | 评论的ID |

**返回示例**

```json
{
    "code": 0,
    "data": null
}
```

### 修改本人的问答评论

**请求API**

+ `/api/questions/comments/`

**请求方式**

+ PATCH

**请求头参数**

| 参数名        | 必选 | 类型   | 说明                  |
| :------------ | :--- | :----- | :-------------------- |
| authorization | 是   | string | token值，用于用户校验 |

**参数**

| 参数名  | 必选 | 类型    | 说明         |
| :------ | :--- | :------ | ------------ |
| id      | 是   | integer | 评论的ID     |
| content | 是   | string  | 新的评论内容 |

**返回示例**

```json
{
    "code": 0,
    "data": {
        "user_id": "cd2ed05828ebb648a225c35a9501b007",
        "nickname": "euler",
        "content": "这个问题很好",
        "create_at": "20200220 13:12:45",
        "reply_to_user": "cd2ed05828ebb648a225c35a9501b007",
        "qa_id": 1,
        "id": 1
    }
}
```

### 问答和评论投票

**请求API**

+ `/api/questions/votes/`

**请求方式**

+ POST

**请求头参数**

| 参数名        | 必选 | 类型   | 说明                  |
| :------------ | :--- | :----- | :-------------------- |
| authorization | 是   | string | token值，用于用户校验 |

**参数**

| 参数名 | 必选 | 类型    | 说明                                               |
| :----- | :--- | :------ | -------------------------------------------------- |
| type   | 否   | string  | 投票的对象类型，answer表示回答，省略或其他表示评论 |
| id     | 是   | integer | 投票的对象ID                                       |
| value  | 是   | string  | 投票的值，赞成或反对                               |

**返回示例**

```json
{
    "code": 0,
    "data": {
        "user_id": "cd2ed05828ebb648a225c35a9501b007",
        "value": true,
        "ac_id": 1,
        "id": 1
    }
}
```

### 撤销问答和评论投票

**请求API**

+ `/api/questions/votes/?id=<id>`

**请求方式**

+ DELETE

**请求头参数**

| 参数名        | 必选 | 类型   | 说明                  |
| :------------ | :--- | :----- | :-------------------- |
| authorization | 是   | string | token值，用于用户校验 |

**查询字符串参数**

| 参数名 | 必选 | 类型    | 说明   |
| :----- | :--- | :------ | ------ |
| id     | 是   | integer | 投票ID |

**返回示例**

```json
{
    "code": 0,
    "data": null
}
```

### 查看问题详情

**请求API**

+ `/api/questions/(?P<question_id>\d+)/`

**请求方式**

+ GET

**返回示例**

```json
{
    "code": 0,
    "data": {
        "id": 1,
        "answer_numbers": 1,
        "answered": 1,
        "answers": {
            "results": [
                {
                    "id": 1,
                    "content": "这是一篇回答内容",
                    "vote_count": 0,
                    "comment_count": 0,
                    "i_agreed": null,
                    "create_at": "20200311 11:51:39",
                    "author_info": {
                        "nickname": "手机用户4zvDTn3",
                        "avatar": "/avatar/36dda3061ff7738850aa522ddb900f27.jpg",
                        "autograph": "CXV工程师",
                        "slug": "shou-ji-yong-hu-4zvdtn3",
                        "answer_count": 3,
                        "article_count": 2
                    }
                }
            ],
            "total": 1
        },
        "title": "我的第一个问题",
        "content": null,
        "user_id": "e4da3b7fbbce2345d7772b0674a318d5",
        "nickname": "haoran·zhang",
        "create_at": "20200311 11:38:48",
        "labels": [
            {
                "id": 1,
                "name": "标签1"
            }
        ],
        "follow_numbers": 0,
        "comment_numbers": 0,
        "followed": false
    }
}
```

### 查看回答详情

**请求API**

+ `/api/questions/(?P<question_id>\d+)/answers/(?P<answer_id>\d+)/`

**请求方式**

+ GET

**请求头参数**

| 参数名        | 必选 | 类型   | 说明                  |
| :------------ | :--- | :----- | :-------------------- |
| authorization | 否   | string | token值，用于用户校验 |

**未登录时返回示例**

```json
{
    "code": 0,
    "data": {
        "question": {
            "id": 1,
            "title": "我的第一个问题",
            "answer_count": 1,
            "comment_count": 0,
            "followed": false
        },
        "answer": {
            "id": 1,
            "content": "这是一篇回答内容",
            "vote_count": 0,
            "comment_count": 0,
            "i_agreed": null,
            "create_at": "20200311 11:51:39",
            "author_info": {
                "nickname": "旗渡用户",
                "avatar": null,
                "autograph": null,
                "slug": null
            }
        },
        "another_answer": null
    }
}
```

**登录时返回示例**

```json
{
    "code": 0,
    "data": {
        "question": {
            "id": 1,
            "title": "我的第一个问题",
            "answer_count": 1,
            "comment_count": 0,
            "followed": false
        },
        "answer": {
            "id": 1,
            "content": "这是一篇回答内容",
            "vote_count": 0,
            "comment_count": 0,
            "i_agreed": null,
            "create_at": "20200311 11:51:39",
            "author_info": {
                "nickname": "手机用户4zvDTn3",
                "avatar": "/avatar/36dda3061ff7738850aa522ddb900f27.jpg",
                "autograph": "CXV工程师",
                "slug": "shou-ji-yong-hu-4zvdtn3",
                "answer_count": 3,
                "article_count": 2,
                "follower_count": 0,
                "i_followed_author": false
            }
        },
        "another_answer": null
    }
}
```

### 查看问题的所有评论

**请求API**

+ `/api/questions/(?P<question_id>\d+)/comments/`

**请求方式**

+ GET

**返回示例**

```json
{
    "code": 0,
    "data": [
        {
            "id": 2,
            "user_id": "asdfjaselr23sdapreiwepfjdla",
            "nickname": "euler",
            "content": "很简单",
            "create_at": "2020-02-20 10:32:41",
            "reply_to_user": "cd2ed05828ebb648a225c35a9501b007",
            "vote_count": 0
        },
        {
            "id": 4,
            "user_id": "cd2ed05828ebb648a225c35a9501b007",
            "nickname": "gauss",
            "content": "这个问题很好",
            "create_at": "2020-02-20 11:23:06",
            "reply_to_user": "cd2ed05828ebb648a225c35a9501b007",
            "vote_count": 0
        }
    ]
}
```
